# idl2schemata Golden Test Files

These `.avsc` files are the expected output of `avdl idl2schemata` for
each test input `.avdl` file. They were generated by running
`avro-tools-1.12.1.jar idl2schemata` (Java reference implementation).

## Why these exist

The Avro submodule has `.avpr` golden files for `idl` mode (in
`avro/lang/java/idl/src/test/idl/output/`), but no per-schema `.avsc`
files for `idl2schemata`. Java's own `idl2schemata` test
(`TestIdlToSchemataTool.java`) only checks file counts, not content.

These golden files give us content-level regression coverage that the
upstream test suite lacks.

## Regeneration

To regenerate from the Java tool:

```sh
INPUT_DIR=avro/lang/java/idl/src/test/idl/input
CLASSPATH_DIR=avro/lang/java/idl/src/test/idl/putOnClassPath
JAR=avro-tools-1.12.1.jar

# Files needing classpath:
#   baseball, schema_syntax_schema → INPUT_DIR
#   import, nestedimport → INPUT_DIR + CLASSPATH_DIR

for f in $INPUT_DIR/*.avdl; do
    stem=$(basename "$f" .avdl)
    outdir="tests/testdata/idl2schemata-golden/$stem"
    mkdir -p "$outdir"

    case "$stem" in
        baseball|schema_syntax_schema)
            java -cp "$JAR" org.apache.avro.tool.Main idl2schemata \
                --classpath "$INPUT_DIR" "$f" "$outdir" ;;
        import|nestedimport)
            java -cp "$JAR" org.apache.avro.tool.Main idl2schemata \
                --classpath "$INPUT_DIR" --classpath "$CLASSPATH_DIR" "$f" "$outdir" ;;
        *)
            java -jar "$JAR" idl2schemata "$f" "$outdir" ;;
    esac
done
```

Note: `status.avdl` is intentionally excluded — it defines only an
error type with no named schemas, producing empty output.
